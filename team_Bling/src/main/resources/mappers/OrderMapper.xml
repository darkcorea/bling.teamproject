<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.project.bling.mapper.orderMapper">

	 <!-- 비회원 주문 등록 -->
	<insert id="nonorderinsert" parameterType="NonorderVO">
	<![CDATA[
	insert into bg_nonorder(NONIDX,ORDERID,NAME,EMAIL,PHONE,ZIP_CODE,ADDR1,ADDR2,RPHONE,RECIPIENT,TOT_PRICE,DEPOSITOR,ORDER_YN,PAYMENT) 
	values(nonidx_seq.nextval,#{orderid},#{name},#{email},#{phone},#{zip_code},#{addr1},#{addr2},#{rphone},#{recipient},#{tot_price},#{depositor},#{order_yn},#{payment})
	]]>
	<selectKey resultType="int" keyProperty="nonidx" order="AFTER">
	
	SELECT MAX(nonidx) FROM bg_nonorder
	
	</selectKey>
	</insert>
	<insert id="nonorderdetailinsert" parameterType="NonorderVO">
	<![CDATA[
	insert into bg_nonorder_detail(detail_idx,NONIDX,OIDX,QUANTITY) 
	values(detail_idx_seq.nextval,#{nonidx},#{oidx},#{quantity})
	]]>
	
	</insert>
	
</mapper>