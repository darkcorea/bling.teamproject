<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.project.bling.mapper.adminmapper.ad_registMapper">

	<!-- 관리자 제품 등록 -->
	<insert id="productInsert" parameterType="ProductVO">
	INSERT INTO BG_PRODUCT(pidx, pname, kind, price, discount, saleprice, rdate)
	VALUES(pidx_seq.nextval, #{pname}, #{kind}, #{price}, #{discount}, #{saleprice}, sysdate)
	<selectKey resultType="int" keyProperty="pidx" order="AFTER">
	
	SELECT MAX(pidx) FROM BG_PRODUCT
	
	</selectKey>
	</insert>
	
	<!-- 관리자 옵션 등록 -->
	<insert id="optionInsert" parameterType="OptionVO">
	INSERT INTO BG_OPTION(oidx, color, texture, sizes, stock, addprice, pidx, oname)
	VALUES(oidx_seq.nextval, #{color}, #{texture}, #{sizes}, #{stock}, #{addprice}, #{pidx}, #{oname})
	</insert>
	
	<!--  관리자 이미지 등록 -->
	<insert id="imageInsert" parameterType="ImageVO">
	INSERT INTO BG_IMAGE(image_idx, pidx, main, detail1, showing1
	<if test="detail2 != null">, detail2</if>
	<if test="detail3 != null">, detail3</if>
	<if test="showing2 != null">, showing2</if>
	<if test="showing3 != null">, showing3</if>
	<if test="showing4 != null">, showing4</if>
	<if test="showing5 != null">, showing5</if>
	)
	VALUES(image_seq.nextval, #{pidx}, #{main}, #{detail1}, #{showing1}
	<if test="detail2 != null">, #{detail2}</if>
	<if test="detail3 != null">, #{detail3}</if>
	<if test="showing2 != null">, #{showing2}</if>
	<if test="showing3 != null">, #{showing3}</if>
	<if test="showing4 != null">, #{showing4}</if>
	<if test="showing5 != null">, #{showing5}</if>
	
	)
	</insert>
	
	<!-- 관리자 제품 정보 불러오기 -->
	<select id="list" resultType="ProductVO">
		 SELECT pidx
        	 , pname
        	 , kind
        	 , price
        	 , rdate
          FROM BG_PRODUCT
          WHERE 1=1 
	</select>
	
</mapper>